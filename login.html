<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Login ‚Ä¢ CodeSathi</title>
  <meta name="theme-color" content="#00c853" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#0b0f14;           /* page bg */
      --panel:#0e1420ee;      /* auth card */
      --muted:#666d77;        /* secondary text */
      --ink:#e7edf5;          /* primary text */
      --brand:#183ee6;        /* primary brand (HackerRank-ish green) */
      --brand-2:#0039c8;      /* darker brand */
      --danger:#ff5252;
      --focus:#4d3ddc;
      --ring: 0 0 0 3px #18e67a55;
      --shadow-1: 0 10px 30px rgba(0,0,0,.35), 0 2px 10px rgba(0,0,0,.35);
      --radius: 20px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; color:var(--ink);
      background: radial-gradient(1200px 800px at 20% -10%, #113, transparent 60%),
                  radial-gradient(1000px 600px at 120% 110%, #022, transparent 60%),
                  linear-gradient(180deg, #070b10 0%, #0a0f16 100%);
      overflow:hidden;
    }

    /* ===== Background layers ===== */
    .bg-scape{position:fixed; inset:0; z-index:-3;}
    .orb{position:absolute; width:60vmin; height:60vmin; border-radius:50%; filter:blur(40px); opacity:.18; mix-blend:screen;}
    .orb.one{left:-10%; top:-10%; background:conic-gradient(from 30deg,#0ff,#18e67a,#0ff);} 
    .orb.two{right:-20%; bottom:-20%; background:conic-gradient(from 210deg,#18e67a,#0ff,#18e67a);} 
    @keyframes floatSlow{from{transform:translate3d(0,0,0)}50%{transform:translate3d(0,-20px,0)}to{transform:translate3d(0,0,0)}}
    .orb{animation:floatSlow 10s ease-in-out infinite}

    /* Gridlines */
    .grid{
      position:fixed; inset:0; z-index:-2; opacity:.25; pointer-events:none;
      background-image:
        linear-gradient(rgba(24,230,122,.18) 1px, transparent 1px),
        linear-gradient(90deg, rgba(24,230,122,.12) 1px, transparent 1px);
      background-size: 40px 40px, 40px 40px;
      mask-image: radial-gradient(1000px 600px at 70% 40%, rgb(0, 0, 0), transparent 70%);
      animation: pan 22s linear infinite;
    }
    @keyframes pan{from{background-position:0 0,0 0}to{background-position:0 40px,40px 0}}

    /* Scrolling code rain (subtle) */
    .rain{position:fixed; inset:0; z-index:-1; mix-blend-mode:screen; pointer-events:none; opacity:.25}
    .rain span{position:absolute; top:-10%; color:#18e67a; font-weight:700; letter-spacing:.12em; opacity:.08; transform:rotate(-8deg)}

    /* ===== Layout ===== */
    .wrap{display:grid; grid-template-columns:1.1fr .9fr; height:100vh;}
    @media (max-width: 992px){.wrap{grid-template-columns:1fr}} 

    /* Left hero */
    .hero{position:relative; padding:5vmin; display:flex; align-items:center; justify-content:center;}
    .hero-inner{max-width:720px}
    .badge{display:inline-flex; align-items:center; gap:.6rem; padding:.35rem .7rem; border-radius:999px; background:#0a141fee; border:1px solid #1e2a3f; box-shadow:var(--shadow-1); font-size:.8rem; color:#9fc8b4}
    .badge i{width:10px; height:10px; border-radius:50%; background:radial-gradient(circle at 30% 30%, #fff, #18e67a 60%, #0a0 100%); box-shadow:0 0 0 3px #18e67a22}

    .hero h1{font-weight:900; font-size:clamp(2rem, 4.6vw, 3.6rem); line-height:1.05; margin:.8rem 0 1rem; letter-spacing:-.02em}
    .hero h1 .accent{background:linear-gradient(90deg, #18e67a, #b4ffdf 40%, #18e67a 80%); -webkit-background-clip:text; background-clip:text; color:transparent}

    .hero p.lead{color:#c7d2df; font-size:clamp(1rem, 1.3vw, 1.2rem); opacity:.9}

    .features{margin:2rem 0; display:grid; grid-template-columns:repeat(3, minmax(0,1fr)); gap:14px}
    .feat{padding:12px 14px; border-radius:14px; background:#0d1624dd; border:1px solid #1d2a40; display:flex; align-items:center; gap:10px}
    .feat svg{width:18px; height:18px}
    /* Right panel (auth) */
    .auth{display:flex; align-items:center; justify-content:center; padding:4vmin}
    .card{position:relative; width:min(520px, 92vw); padding:28px; border-radius:var(--radius); background:linear-gradient(180deg, #0e1420cc, #0b111acc); border:1px solid #1c2a41; box-shadow:var(--shadow-1); backdrop-filter: blur(12px);}
    .card:before{content:""; position:absolute; inset:-2px; border-radius:calc(var(--radius) + 2px); padding:1px; background:linear-gradient(135deg, #1b283e, #18e67a33, #1b283e); -webkit-mask:linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0); -webkit-mask-composite: xor; mask-composite: exclude;}
    .brand{display:flex; align-items:center; gap:.8rem; margin-bottom:10px}
    .brand .logo{width:36px; height:36px; border-radius:10px; background:conic-gradient(from 90deg, #1b18e6, #0ff, #1830e6); filter:drop-shadow(0 6px 16px #1875e633)}
    .brand .title{font-weight:800; letter-spacing:.3px}
    .titlebar{display:flex; align-items:center; justify-content:space-between; margin:6px 2px 18px}
    .titlebar h2{margin:0; font-size:1.4rem}
    .titlebar .mini{color:var(--muted); font-size:.95rem}
    form{display:grid; gap:14px}
    .field{position:relative}
    .label{display:flex; align-items:center; justify-content:space-between; margin:0 0 6px; color:#b9c6d8; font-weight:600; font-size:.9rem}
    .input{display:flex; align-items:center; gap:10px; background:#0b1220; border:1px solid #1d2a40; border-radius:14px; padding:12px 14px; transition:.2s ease;}
    .input:focus-within{box-shadow:var(--ring); border-color:#2a9e64}
    .input svg{opacity:.7}
    .input input{all:unset; color:var(--ink); font-size:1rem; flex:1}
    .helper{font-size:.8rem; color:#8aa1b6}
    .error{font-size:.85rem; color:var(--danger); display:none}
    .role-toggle{display:grid; grid-template-columns:1fr 1fr; background:#0b1220; border:1px solid #1d2a40; border-radius:14px; padding:5px; position:relative}
    .role-toggle input{display:none}
    .role-toggle label{position:relative; z-index:1; text-align:center; padding:10px 8px; border-radius:10px; cursor:pointer; user-select:none; font-weight:700; letter-spacing:.3px; color:#98f5c5}
    .slider{position:absolute; top:5px; bottom:5px; width:calc(50% - 5px); left:5px; border-radius:10px; background:linear-gradient(90deg, #143, #0b3); box-shadow: inset 0 0 0 1px #2c725a, 0 8px 24px #0a4f2a88; transition: transform .25s ease}
    #role-solver:checked ~ .slider{transform:translateX(100%)}
    .actions{display:grid; gap:12px; margin-top:4px}
    .btn{position:relative; border:none; cursor:pointer; border-radius:14px; padding:14px 16px; font-weight:800; letter-spacing:.4px; background:linear-gradient(180deg, #1bff98, #0bd572 30%, #00c853 60%, #00b24a 100%);
      color:#052312; box-shadow:0 12px 30px rgba(0, 200, 83, .35), inset 0 -2px 0 #058b43; overflow:hidden;}
    .btn .shine{position:absolute; inset:0; background:linear-gradient(120deg, transparent 0%, rgba(255,255,255,.5) 25%, transparent 50%); transform:skewX(-20deg) translateX(-120%); transition:transform .6s ease}
    .btn:hover .shine{transform:skewX(-20deg) translateX(120%)}
    .btn.loading{pointer-events:none; opacity:.9}
    .btn.loading:after{content:""; position:absolute; right:16px; top:50%; width:16px; height:16px; margin-top:-8px; border-radius:50%; border:2px solid #022; border-top-color:#fff; animation:spin .8s linear infinite}
    @keyframes spin{to{transform:rotate(360deg)}}
    .links{display:flex; justify-content:space-between; align-items:center; font-size:.9rem; margin-top:4px}
    .links a{color:#9be9c6; text-decoration:none}
    .note{margin-top:4px; font-size:.85rem; color:#9bb5c9}
    /* Footer */
    .foot{margin-top:18px; display:flex; gap:10px; align-items:center; justify-content:center; color:#87a2b8; font-size:.85rem}
    .foot svg{width:14px; height:14px}
    /* Subtle entrance animations */
    .reveal{opacity:0; transform:translateY(10px); animation:reveal .7s ease forwards}
    .reveal.delay-1{animation-delay:.1s}
    .reveal.delay-2{animation-delay:.2s}
    .reveal.delay-3{animation-delay:.3s}
    .reveal.delay-4{animation-delay:.4s}
    @keyframes reveal{to{opacity:1; transform:none}}
    /* Mobile tune */
    @media (max-width: 992px){
      body{overflow:auto}
      .hero{display:none}
    }
  </style>
</head>
<body>
  <!-- Background layers -->
  <div class="bg-scape">
    <div class="orb one"></div>
    <div class="orb two"></div>
    <canvas id="particles" class="rain" aria-hidden="true"></canvas>
    <div class="grid" aria-hidden="true"></div>
  </div>
  <div class="wrap">
    <!-- Left Hero -->
    <aside class="hero">
      <div class="hero-inner">
        <span class="badge reveal"><i></i> Secure ‚Ä¢ Fast ‚Ä¢ Developer‚Äëfirst</span>
        <h1 class="reveal delay-1">Sign in to <span class="accent">CodeSaathi</span><br><span id="type"></span></h1>
        <p class="lead reveal delay-2">Your problem‚Äësolving hub for <strong>Askers</strong> and <strong>Solvers</strong>. Track tasks, discuss solutions, and grow with the community.</p>
        <div class="features reveal delay-3">
          <div class="feat">
            <svg viewBox="0 0 24 24" fill="none"><path d="M12 3v18m9-9H3" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
            <span>Create tasks & challenges</span>
          </div>
          <div class="feat">
            <svg viewBox="0 0 24 24" fill="none"><path d="M21 21l-4.35-4.35" stroke="currentColor" stroke-width="2" stroke-linecap="round"/><circle cx="11" cy="11" r="7" stroke="currentColor" stroke-width="2"/></svg>
            <span>Discover top solvers</span>
          </div>
          <div class="feat">
            <svg viewBox="0 0 24 24" fill="none"><path d="M4 7h16M4 12h16M4 17h10" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
            <span>Track progress live</span>
          </div>
        </div>
      </div>
    </aside>
    <!-- Right Auth Card -->
    <main class="auth">
      <div class="card reveal delay-2">
        <div class="brand">
          <div class="logo"></div>
          <div class="title">CodeSathi</div>
        </div>
        <div class="titlebar">
          <h2>Welcome back</h2>
          <div class="mini">New here? <a href="register.html" style="color:#9be9c6">Create account</a></div>
        </div>
        <form id="loginForm" novalidate>
          <div class="field">
            <div class="label">Email or Phone</div>
            <div class="input">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M4 4h16v16H4V4zm0 0l8 8 8-8" stroke="currentColor" stroke-width="2"/></svg>
              <input id="id" name="id" type="text" autocomplete="username" placeholder="you@example.com / +91‚Ä¶" required />
            </div>
            <div class="error" id="idErr">Please enter a valid email or phone.</div>
          </div>
          <div class="field">
            <div class="label">Password <span class="helper">min 6 chars</span></div>
            <div class="input">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M6 11V8a6 6 0 1112 0v3M5 11h14v9H5v-9z" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
              <input id="password" name="password" type="password" autocomplete="current-password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required minlength="6" />
              <button type="button" id="togglePw" aria-label="Show password" style="all:unset; cursor:pointer; opacity:.7">üëÅÔ∏è</button>
            </div>
            <div class="error" id="pwErr">Password must be at least 6 characters.</div>
          </div>
          <div class="field">
            <div class="label">Login as</div>
            <div class="role-toggle">
              <input type="radio" id="role-asker" name="role" value="asker" checked>
              <label for="role-asker">Asker</label>
              <input type="radio" id="role-solver" name="role" value="solver">
              <label for="role-solver">Solver</label>
              <div class="slider" aria-hidden="true"></div>
            </div>
          </div>
          <div class="actions">
            <button id="loginBtn" class="btn" type="submit">
              <span class="shine"></span>
              Log In
            </button>
            <div class="links">
              <a href="#" id="forgot">Forgot password?</a>
              <a href="verify-otp.html">Use OTP instead</a>
            </div>
          </div>
          <div class="note">By continuing, you agree to our <a href="#">Terms</a> and <a href="#">Privacy</a>.</div>
          <div class="foot">
            <svg viewBox="0 0 24 24" fill="none"><path d="M12 2v20M2 12h20" stroke="currentColor" stroke-width="2"/></svg>
            <span>Secure sign‚Äëin with device & network checks</span>
          </div>
        </form>
      </div>
    </main>
  </div>
  <script>
    /* ===== Typewriter headline ===== */
    const typeEl = document.getElementById('type');
    const phrases = [
      'and start solving.',
      'where challenges become skills.',
      'built for Askers & Solvers.',
    ];
    let pi = 0, ci = 0, dir = 1;
    function typeLoop(){
      const target = phrases[pi];
      ci += dir;
      typeEl.textContent = target.slice(0, ci);
      if(ci === target.length){ dir = -1; setTimeout(typeLoop, 1300); return; }
      if(ci === 0){ dir = 1; pi = (pi+1)%phrases.length; }
      setTimeout(typeLoop, dir>0 ? 38 : 22);
    }
    typeLoop();
    /* ===== Particle rain (code streams) ===== */
    const cvs = document.getElementById('particles');
    const ctx = cvs.getContext('2d');
    let W = cvs.width = window.innerWidth; let H = cvs.height = window.innerHeight;
    window.addEventListener('resize', ()=>{ W = cvs.width = window.innerWidth; H = cvs.height = window.innerHeight; initDrops(); });
    const glyphs = '01{}[]<>;:=+-*/&|^%!$#@';
    let drops=[];
    function initDrops(){
      drops = Array.from({length: Math.floor(W/22)}, (_,i)=>({x:i*22+Math.random()*8, y:-(Math.random()*H), sp:1.2+Math.random()*2.4, s:12+Math.random()*4}));
    }
    initDrops();
    (function loop(){
      ctx.clearRect(0,0,W,H);
      for(const d of drops){
        ctx.fillStyle = 'rgba(24,230,122,0.15)';
        ctx.font = `${d.s}px Inter, monospace`;
        ctx.fillText(glyphs[Math.floor(Math.random()*glyphs.length)], d.x, d.y);
        d.y += d.sp*3;
        if(d.y > H+40) d.y = -20;
      }
      requestAnimationFrame(loop);
    })();
    /* ===== Form UX ===== */
    const form = document.getElementById('loginForm');
    const btn = document.getElementById('loginBtn');
    const idInput = document.getElementById('id');
    const pwInput = document.getElementById('password');
    const idErr = document.getElementById('idErr');
    const pwErr = document.getElementById('pwErr');
    const togglePw = document.getElementById('togglePw');
    togglePw.addEventListener('click', ()=>{
      const t = pwInput.getAttribute('type') === 'password' ? 'text' : 'password';
      pwInput.setAttribute('type', t);
      togglePw.textContent = t==='password' ? 'üëÅÔ∏è' : 'üôà';
    });
    function validId(v){
      const email=/^[^\s@]+@[^\s@]+\.[^\s@]+$/; const phone=/^\+?\d{10,14}$/; return email.test(v)||phone.test(v);
    }
    form.addEventListener('submit', async (e)=>{
      e.preventDefault();
      idErr.style.display = validId(idInput.value.trim()) ? 'none':'block';
      pwErr.style.display = pwInput.value.length>=6 ? 'none':'block';
      if(idErr.style.display==='block' || pwErr.style.display==='block') return;
      // Loading state
      btn.classList.add('loading');
      const label = btn.textContent.trim();
      btn.firstChild && btn.firstChild.classList && btn.firstChild.classList.add('shine');
      // Simulate request (replace with real fetch to /login)
      await new Promise(r=>setTimeout(r, 1200));
      // Success demo: store user + role then go home
      const role = document.querySelector('input[name="role"]:checked').value;
      const username = idInput.value.includes('@') ? idInput.value.split('@')[0] : 'User';
      // Using in-memory storage instead of localStorage
      window.userData = { username, role };
      confetti(btn);
      // Redirect based on role
      setTimeout(()=>{
        if(role === 'asker'){
          window.location.href = 'asker.html';
        } else {
          window.location.href = 'solverdashboard.html';
        }
      }, 500);
    });
    /* ===== Confetti on success (tiny, no deps) ===== */
    function confetti(fromEl){
      const rect = fromEl.getBoundingClientRect();
      const cx = rect.left + rect.width/2; const cy = rect.top + rect.height/2;
      const n = 26; const frags=[]; const colors=['#18e67a','#b4ffdf','#00c853','#00ffd0'];
      for(let i=0;i<n;i++){
        const div=document.createElement('div');
        div.style.position='fixed'; div.style.width='6px'; div.style.height='10px'; div.style.left=cx+'px'; div.style.top=cy+'px';
        div.style.transform=`translate(-50%,-50%) rotate(${Math.random()*360}deg)`; div.style.borderRadius='2px';
        div.style.background=colors[i%colors.length]; div.style.zIndex=9999; div.style.pointerEvents='none';
        document.body.appendChild(div);
        const ang = Math.random()*Math.PI*2; const v = 6+Math.random()*7; const dx = Math.cos(ang)*v; const dy = Math.sin(ang)*v - 6;
        frags.push({el:div, x:cx, y:cy, dx, dy, g:.45+Math.random()*.2, a:1});
      }
      (function step(){
        let alive=false;
        for(const f of frags){ f.dy += f.g; f.x += f.dx; f.y += f.dy; f.a -= .02; if(f.a>0){ alive=true; }
          f.el.style.left=f.x+'px'; f.el.style.top=f.y+'px'; f.el.style.opacity=f.a; }
        if(alive) requestAnimationFrame(step); else frags.forEach(f=>f.el.remove());
      })();
    }
    /* ===== Demo forgot link ===== */
    document.getElementById('forgot').addEventListener('click', (e)=>{
      e.preventDefault();
      alert('Password reset flow coming soon. For now, try OTP sign-in.');
    });
  </script>
</body>
</html>
